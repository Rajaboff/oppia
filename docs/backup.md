# Бекапирование сервиса

На сервере oqustudy.kz лежит файл для создание бекапов и восстановления их них - `/root/service_backup.sh`

## Создание бекапа

Для создания бекапа нужно запустить скрипт с параметром `create`:

```bash
/root/service_backup.sh create
```

После выполнения будет создан архив в дире `/backups/daily/`.
Имя архива будет начинаться с сегодняшней даты, например для 17.05.2021 путь до архива будет `/backups/daily/2021-05-17_appengine.None.root.tar.gz`

## Восстановление из бекапа

Для восстановления бекапа нужно запустить скрипт с параметром `restore`:

```bash
/root/service_backup.sh restore
```

Во время выполнения скрипта будет взят вчерашний архив и распакован по пути `/root/appengine.None.root`.
Например для даты 17.05.2021 будет использоваться архив `/backups/daily/2021-05-16_appengine.None.root.tar.gz`

## Логирование

При запуске скрипта он будет логировать все запросы в `/var/log/service_backup.sh`

## Периодический запуск

Скрипт запускается автоматически каждый день с помощью cron-а:

```bash
crontab -l

50 23 * * * /bin/bash /root/service_backup.sh create
```
