# Бекапирование сервиса

На сервере oqustudy.kz лежит файл для создание бекапов и восстановления их них - `/root/service_backup.sh`

## Создание бекапа

Для создания бекапа нужно запустить скрипт с параметром `create`:

```bash
/root/service_backup.sh create
```

После выполнения будет создан архив в дире `/backups/daily/`.
Имя архива будет начинаться с сегодняшней даты и времени, например для 17.05.2021 11:00:00 путь до архива будет `/backups/daily/20210517T110000_appengine.None.root.tar.gz`

## Восстановление из бекапа

Для восстановления бекапа нужно запустить скрипт с параметром `restore` и передать путь к файлу для восстановления:

```bash
/root/service_backup.sh restore /backups/daily/20210517T110000_appengine.None.root.tar.gz
```

Во время выполнения скрипта переданный архив будет распакован по пути `/root/appengine.None.root`.

## Логирование

При запуске скрипта он будет логировать все запросы в `/var/log/service_backup.log`

## Периодический запуск

Скрипт запускается автоматически каждый день с помощью cron-а:

```bash
crontab -l

50 23 * * * /bin/bash /root/service_backup.sh create
```
